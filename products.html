<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Business Casual - Start Bootstrap Theme</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body>
        <header>
            <h1 class="site-heading text-center text-faded d-none d-lg-block">
                <span class="site-heading-upper text-primary mb-3">API</span>

            </h1>
        </header>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">
            <div class="container">
                <a class="navbar-brand text-uppercase fw-bold d-lg-none" href="index.html">Start Bootstrap</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="index.html">Home</a></li>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="about.html">Java Script</a></li>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="products.html">Api</a></li>
                        <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="store.html">chart</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <section class="page-section">
            <div class="container">
                <div class="product-item">
                    <div class="product-item-title d-flex">
                        <div class="bg-faded p-5 d-flex ms-auto rounded">
                            <h2 class="section-heading mb-0">
                                <img id="watermelonImage" src="" alt="Random Watermelon Image" style="height: 300px;border-radius: 20px;">
                                <span class="section-heading-lower">    <button onclick="getRandomImage()" class="btn btn-dark">Get Random Image</button></span>
                            </h2>
                        </div>
                    </div>
                   
                    <div class="product-item-description d-flex me-auto">
                        <div class="bg-faded p-5 rounded"><div id="a2"></div>
                        <br> <button onclick="generateRandomText()" class="btn btn-dark">Generate Random Text</button></div>
                    </div>
                </div>
            </div>
        </section>
        <section class="page-section">
            <div class="container">
                <div class="product-item">
                    <div class="product-item-title d-flex">
                        <div class="bg-faded p-5 d-flex me-auto rounded">
                            
                               
                            <form class="" method="POST" accept-charset="UTF-8" autocomplete="off" name="sheet1"><br>
                                <div id="google"></div>
                                <div id="clock">
                                </div>
                                <label>
                                <label for="fname" class="lable">Enter your first name</label>
                                <input type="text" name="first_name"  required autocomplete="off"><br><br>
                                <label for="lname" class="lable">Enter your last name</label>
                                <input type="text" name="last_name" required autocomplete="off"><br><br>
                                <label for="email" class="lable">Enter email address</label>
                                <input type="email" name="email" required autocomplete="off"><br><br>
                                           <br>
                                <button type="submit" class="btn btn-success">Submit</button>
                                <iframe width="1000" height="450"src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQpjoZxOAoRSPBPSYVzV4mYHV1yDutaymIZP88g6Z2KdTz7eDJ33pC0zgEu0TcLVLBQY4otuH8ERKyH/pubhtml?gid=0&amp;single=true&amp;widget=true&amp;headers=false"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="page-section">
            <div class="container">
                <div class="product-item">
                    <div class="product-item-title d-flex">
                        <div class="bg-faded p-5 d-flex ms-auto rounded">
                            <div id="lastUpdateTime">
                                <label>Last Update Time: 12:49:57 AM</label>
                              </div>
                                <div class="" id="prices" style="text-align: left; padding: 0 0 0 40px;">
                                  <ul class="list-group list-group-numbered">
                                    <li class="list-group-item">1INCH: 2.6417040951122853655185</li>
                                    <li class="list-group-item">AAVE: 0.010197705252422208264</li>
                                    <li class="list-group-item">ABT: 8.809559471365638762996</li>
                                    <li class="list-group-item">ACH: 41.6914064128757870637855</li>
                                    <li class="list-group-item">ACS: 392.920719127615679305476</li>
                                    <li class="list-group-item">ADA: 2.2346368715083799</li>
                                    <li class="list-group-item">AED: 3.6718776855000000999885</li>
                                    <li class="list-group-item">BTC: 0.0000226964519771</li>
                                    <li class="list-group-item">ETH: 0.0004399801128989</li>
                                  </ul>
                              </center>
                            </div>
                        </div>
                    </div>
                    <div class="product-item-description d-flex me-auto">
                        <div class="bg-faded p-5 rounded"><p class="mb-0"><label for="paramInput">Enter Parameter:</label>
                            <input type="text" id="nameInput" placeholder="Enter a name">
                            <button onclick="getNationality()" class="btn btn-dark"> Guess</button>
                            <div id="result"></div></div>
                    </div>
                </div>
            </div>
        </section>
        <footer class="footer text-faded text-center py-5">
            <div class="container"><p class="m-0 small">Copyright &copy; Your Website 2023</p></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script>
            //================================================
            function generateRandomText() {
            fetch("https://www.boredapi.com/api/activity")
              .then(response => response.json())
              .then(data => {
                let resultElement = document.getElementById("a2");
                resultElement.innerHTML = `<strong>Random Text:</strong> ${data.activity}`;
              })
              .catch(error => {
                console.error('Error fetching random text:', error);
              });
          }
            //=================================================
            function getRandomImage() {
                // Unsplash API endpoint สำหรับค้นหารูปภาพแตงโม
                const apiUrl = 'https://source.unsplash.com/featured/?watermelon';
    
                // สุ่ม cache buster เพื่อให้รูปภาพเปลี่ยนตลอดเวลา
                const cacheBuster = Math.random();
    
                // กำหนด URL รูปภาพ
                const imageUrl = `${apiUrl}&${cacheBuster}`;
    
                // กำหนด URL รูปให้กับ <img>
                document.getElementById('watermelonImage').src = imageUrl;
            }
            //================================================================
            function getNationality() {
                const name = document.getElementById('nameInput').value;
        
                fetch(`https://api.nationalize.io/?name=${name}`)
                    .then(response => response.json())
                    .then(data => {
                    const resultElement = document.getElementById('result');
                    if (data.country.length > 0) {
                        const countries = data.country.map(country => `${country.country_id} (${(country.probability * 100).toFixed(2)}%)`).join(', ');
                        resultElement.innerHTML = `Name: ${data.name}, Probable Nationalities: ${countries}`;
                    } else {
                        resultElement.innerHTML = 'No nationality data available for this name.';
                    }
                    })
                }
                //================================================================
                function displayPrices(rates) {
                    const currencies = ['1INCH', 'AAVE', 'ABT', 'ACH', 'ACS', 'ADA', 'AED', 'BTC', 'ETH'];
                    const pricesHtml = `
                      <br>
                      <ul class='list-group list-group-numbered'>${currencies.map(currency => `<li class='list-group-item'>${currency} : ${rates[currency] || 'N/A'}</li>`).join('')}</ul>
                  `;
                    document.getElementById('prices').innerHTML = pricesHtml;
                  }
                  // Function to handle fetch errors
                  function handleFetchError(error) {
                    console.error('Error fetching data:', error);
                    alert('Error fetching data. Please try again.');
                  }
                  // Function to display the last update time
                  function displayLastUpdateTime() {
                    const updateTimeDiv = document.getElementById('lastUpdateTime');
                    const currentTime = new Date().toLocaleTimeString();
                  
                    updateTimeDiv.innerHTML = `<label>Last Update Time: ${currentTime}</label>`;
                  }
                  // Initial fetch and display
                  fetchPrices();
                  // Set interval to fetch and update prices every 30 seconds
                  setInterval(fetchPrices, 1000);
                  
                  // Function to fetch cryptocurrency prices from the Coinbase API
                  async function fetchPrices() {
                    try {
                      const response = await fetch('https://api.coinbase.com/v2/exchange-rates?currency=USDT');
                      const data = await response.json();
                  
                      // Display prices and last update time
                      displayPrices(data.data.rates);
                      displayLastUpdateTime();
                    } catch (error) {
                      handleFetchError(error);
                    }
                  }
                  //================================================================
                  const scriptURL = 'https://script.google.com/macros/s/AKfycbzDpLaeqQcC4wX_W2ljkRFf7xXfeEEdXwbsvr17ehnsXxOYiiA1SBllsBkrpVMwb9a9/exec'
          const form = document.forms['sheet1']
      
          form.addEventListener('submit', e => {
            e.preventDefault()
            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
              .then(response => document.getElementById("demo").innerHTML = "<div class='alert alert-primary' role='alert'><b>Thank You for providing the details, We shall get back to you shortly !</b></div>", sheet1.reset())
              .catch(error => console.error('Error!', error.message))
          })
        </script>
    </body>
</html>
